{% extends "base.html" %}
{% block head %}
<style type="text/css">
*{margin:0;padding:0;}
#header{
    height:50px;
    background:red;
}
#main{
    width:80%;
    margin:0 auto;
    overflow:hidden;
}
#main .main-left{
    width:20%;
    height:600px;
    background:yellow;
    float:left;
}
#main .main-middle{
    width:60%;
    background:pink;
    float:left;
}
#main .main-middle #post_list {
    text-align: center;
}
#main .main-right{
    width:20%;
    height:300px;
    background:green;
    float:right;
}
#footer{
    width:80%;
    height:50px;
    background:pink;
    margin:0 auto;
}
</style>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('a#sign').click(function(){
            $.ajax({
                url: '/mysite/sign/',
                type: 'POST',
                data: {'csrfmiddlewaretoken': '{{ csrf_token }}'},
                dataType: 'json',
                timeout: 10000,
                success: function(result) {
                    if(result.data == "post_success") {
                        alert("sign success");
                        window.location.reload();
                    }else {
                        alert("you have signed today,please come tomorrow");
                    }
                }
            });
        });
    });
</script>
{% endblock %}
{% block title %}主页{% endblock %}
{% block body %}
<div id="header">
    <a href="/mysite/home_page"> IBM 论坛</a> <a href="/mysite/new_post"> 发帖 </a><a id="sign" href="#"><span>签到</span></a>  <a href="/mysite/logout"> logout</a>
</div>
<div id="main">
    <div class="main-left">
        {% block main-left %}{% endblock %}
    </div>
    <div class="main-middle">
        {% block main-middle %}{% endblock %}
    </div>
    <div class="main-right">
        {% block main-right %}{% endblock %}
    </div>
</div>
<div id="footer">
this is footer . all right reserve
</div>
{% endblock %}
