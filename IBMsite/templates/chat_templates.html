{% extends "base_with_header_footer.html" %}
    {% block main-left %}
        <style>
            #main{
                background: slategrey;
            }
            #main .main-left{
                width: 25%;
                background:yellow;
                padding-right:0%;
            }
            #main .main-right{
                    width:100%;
                    height:10px;
                    /*background:green;*/
                    /*float:right;*/
            }
        </style>

        {% for item in query_set %}
            <div class="list-group">
                <button type="button" class="list-group-item">
                    <span class="badge">14</span>
                    msg_from:{{ item.msg_from.email }}
                </button>
                <button type="button" class="list-group-item">
                    <span class="badge">14</span>
                    msg_to:{{ item.msg_to.email }}
                </button>
                <button type="button" class="list-group-item">
                    <span class="badge">14</span>
                    msg_time:{{ item.time|date:"Y-m-d H:i:s" }}
                </button>
                <button type="button" class="list-group-item">
                    <span class="badge">14</span>
                    msg_read_status:{{ item.read_status }}
                </button>
                <button type="button" class="list-group-item">
                    <span class="badge">14</span>
                    msg_content:{{ item.content }}
                </button>
            </div>
        {% endfor %}
    {% endblock %}
{% block main-middle %}
<style>
    #main .main-middle{
        /*background:pink;*/
        margin-left:5%;
        width:68%;
    }
</style>
<div class="main-middle-top" style="background-color: black">
    <nav class="navbar nav-default nav-static-top">
        <div >
            <p style="text-align: center;margin-top: 10px;color: whitesmoke">someone</p>
        </div>
    </nav>
</div>
<div class="main-middle-middle" style="background-color: #65ffa7;float: inherit;margin-bottom: 20px">
    <div class="row pre-scrollable" style="overflow-y:scroll" id="chatter">
        <div class="leftd">
            <span ng-class="leftd_h">
                <img ng-src="./img/c_pic.pn" />
            </span>
            <div class="speech left" ng-class="speech left">
                二货，你看你傻样！
            </div>
        </div>
        <div class="rightd">
            <span ng-class="rightd_h">
                <img ng-src="./img/u_pic.pn" />
            </span>
            <div class="speech right" ng-class="speech left">
                嘻嘻嘻嘻。。。。。。
            </div>
        </div>
        <div class="leftd">
            <span ng-class="leftd_h">
                <img ng-src="./img/c_pic.pn" />
            </span>
            <div class="speech left" ng-class="speech left">
                笑什么笑，没看到本宝宝今天变漂亮了吗？
            </div>
        </div>
        <div class="rightd">
            <span ng-class="rightd_h">
                <img ng-src="./img/u_pic.pn" />
            </span>
            <div class="speech right" ng-class="speech left">
                 不不不，每天你都很漂亮的啦！
            </div>
        </div>
        <div class="leftd">
            <span ng-class="leftd_h">
                <img ng-src="./img/c_pic.pn" />
            </span>
            <div class="speech left" ng-class="speech left">
                这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!这还差不多!
            </div>
        </div>
        <div class="rightd" id="last_one">
            <span ng-class="rightd_h">
                <img ng-src="./img/u_pic.pn" />
            </span>
            <div class="speech right" ng-class="speech left">
                 哈哈哈
            </div>
        </div>
    </div>
</div>
<div class="main-middle-bottom">
            <textarea class="form-control" rows="5" placeholder="Enter 发送" onkeydown="sendMsg(event)"></textarea>
</div>
<script>
  function sendMsg(event) {
      if (event.keyCode == 13) {
          event.preventDefault()
//          <div class="rightd">
//            <div class="speech right" ng-class="speech left">
//                嘻嘻嘻嘻。。。。。。
//            </div>
//        </div>
          var msg = $('textarea').val()
          $('textarea').val('')

          var border_div = document.getElementById("chatter")
          var outer_div = document.getElementById("last_one")
          var insert_div = outer_div.cloneNode(true)
          insert_div.children[1].innerHTML = msg
          border_div.insertBefore(insert_div,outer_div.nextSibling)
          outer_div.removeAttribute("id")
          var div = document.getElementById("chatter")
          div.scrollTop = div.scrollHeight
      }else {
          var obj = document.getElementsByClassName("row pre-scrollable")
          console.log(obj)
      }

  }
</script>

<style>
    div.speech {
    float: left;
    margin: 10px 0;
    padding: 8px;
    table-layout: fixed;
    word-break: break-all;
    position: relative;
    background: -webkit-gradient( linear, 50% 0%, 50% 100%, from(#ffffff), color-stop(0.1, #ececec), color-stop(0.5, #dbdbdb), color-stop(0.9, #dcdcdc), to(#8c8c8c) );
    border: 1px solid #989898;
    border-radius: 8px;
}
    div.speech:before {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    left: 15px;
    top: -20px;
    border: 10px solid;
    border-color: transparent transparent #989898 transparent;
}
    div.speech:after {
 content: '';
 position: absolute;
 width: 0;
 height: 0;
 left: 17px;
 top: -16px;
 border: 8px solid;
 border-color: transparent transparent #ffffff transparent;
}
    div.speech.right {
 display: inline-block;
 box-shadow: -2px 2px 5px #CCC;
 margin-right: 10px;
 max-width: 75%;
 float: right;
 background: -webkit-gradient( linear, 50% 0%, 50% 100%, from(#e4ffa7), color-stop(0.1, #bced50), color-stop(0.4, #aed943), color-stop(0.8, #a7d143), to(#99BF40) );
}
    div.speech.right:before {
 content: '';
 position: absolute;
 width: 0;
 height: 0;
 top: 9px;
 bottom: auto;
 left: auto;
 right: -10px;
 border-width: 9px 0 9px 10px;
 border-color: transparent #989898;
}
    div.speech.right:after {
 content: '';
 position: absolute;
 width: 0;
 height: 0;
 top: 10px;
 bottom: auto;
 left: auto;
 right: -8px;
 border-width: 8px 0 8px 9px;
 border-color: transparent #bced50;
}
    div .left {
 display: inline-block;
 box-shadow: 2px 2px 2px #CCCCCC;
 margin-left: 10px;
 max-width: 75%;
 position: relative;
 background: -webkit-gradient( linear, 50% 0%, 50% 100%, from(#ffffff), color-stop(0.1, #eae8e8), color-stop(0.4, #E3E3E3), color-stop(0.8, #DFDFDF), to(#D9D9D9) );
}
    div .left:before {
 content: '';
 position: absolute;
 width: 0;
 height: 0;
 top: 9px;
 bottom: auto;
 left: -10px;
 border-width: 9px 10px 9px 0;
 border-color: transparent #989898;
}
    div .left:after {
 content: '';
 position: absolute;
 width: 0;
 height: 0;
 top: 10px;
 bottom: auto;
 left: -8px;
 border-width: 8px 9px 8px 0;
 border-color: transparent #eae8e8;
}
    .leftimg {
 float: left;
 margin-top: 10px;
}
    .rightimg {
 float: right;
 margin-top: 10px;
}
    .leftd {
 clear: both;
 float: left;
 margin-left: 10px;
}
    .rightd {
 clear: both;
 float: right;
 margin-right: 10px;
}

    .leftd_h{
 width: 39px;
 height: 39px;
 border-radius: 100%;
 display: block;
 float: left;
 overflow: hidden;
}

    .leftd_h img{
 display: block;
 width: 100%;
 height: auto;
}
    .rightd_h{
 width: 39px;
 height: 39px;
 border-radius: 100%;
 display: block;
 float: right;
 overflow: hidden;
}

    .rightd_h img{
 display: block;
 width: 100%;
 height: auto;
}

</style>
{% endblock %}